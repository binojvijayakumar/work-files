//Requested by Surjith 

// var resp = {"Milestones":[{"$id":"3","Id":302,"IsDeleted":false,"Name":"Gather","IsApplicable":false,"Status":null,"StartDate":"0001-01-01T00:00:00","DueDate":"0001-01-01T00:00:00","Steps":[{"$id":"4","Id":788,"WFInstaceDefinationId":0,"IsDeleted":false,"Name":"Gather","Status":null,"StartDate":"0001-01-01T00:00:00","SeqNumber":"1.00","DueDate":"0001-01-01T00:00:00","DoSendEmail":false,"DoDocument":false,"DoSendEmailDisplay":1,"DoDocumentDisplay":1,"RoleColumn":"Preparer","IsRoleRequired":false,"IsApplicable":false,"EmailInfo":{"$id":"5","To":"","CC":"","Subject":"[%Task%]-[%TaxYear%]-[%Obligation%]","Body":"The following Task has been assigned to you and added to your Task List.<br/>Task Name: [%Task%]<br/>Location: [%Jurisdiction%]<br/>Item Name: [%Obligation%]<br/>Due Date: [%DueDate%]<br/>"},"Weight":"25","Duedateoffset":-30,"AssignedTo":null,"SOX":null,"ControlID":null,"ProcessStepName":"","TypeOfProcessStep":"","ProcessStepOrder":"1.00","TypeOfTask":"Task","AdditionalInformation":"","Checklist":"{\r\n  \"root\": \"\"\r\n}","ContentTypeId":1,"ActionId":0,"Description":"Gather","ActualEndDate":"0001-01-01T00:00:00","RoleType":1,"Forms":[{"$id":"6","ID":"88","value":"NOL"},{"$id":"7","ID":"94","value":"Centralized Reclass"},{"$id":"8","ID":"95","value":"Centralized M-1"}],"Reports":[]},{"$id":"4","Id":788,"WFInstaceDefinationId":0,"IsDeleted":false,"Name":"Gather","Status":null,"StartDate":"0001-01-01T00:00:00","SeqNumber":"1.00","DueDate":"0001-01-01T00:00:00","DoSendEmail":false,"DoDocument":false,"DoSendEmailDisplay":1,"DoDocumentDisplay":1,"RoleColumn":"Preparer","IsRoleRequired":false,"IsApplicable":false,"EmailInfo":{"$id":"5","To":"","CC":"","Subject":"[%Task%]-[%TaxYear%]-[%Obligation%]","Body":"The following Task has been assigned to you and added to your Task List.<br/>Task Name: [%Task%]<br/>Location: [%Jurisdiction%]<br/>Item Name: [%Obligation%]<br/>Due Date: [%DueDate%]<br/>"},"Weight":"25","Duedateoffset":-30,"AssignedTo":null,"SOX":null,"ControlID":null,"ProcessStepName":"","TypeOfProcessStep":"","ProcessStepOrder":"1.00","TypeOfTask":"Task","AdditionalInformation":"","Checklist":"{\r\n  \"root\": \"\"\r\n}","ContentTypeId":1,"ActionId":0,"Description":"Gather","ActualEndDate":"0001-01-01T00:00:00","RoleType":1,"Forms":[],"Reports":[]}]},{"$id":"9","Id":303,"IsDeleted":false,"Name":"Prepare","IsApplicable":false,"Status":null,"StartDate":"0001-01-01T00:00:00","DueDate":"0001-01-01T00:00:00","Steps":[{"$id":"10","Id":789,"WFInstaceDefinationId":0,"IsDeleted":false,"Name":"Prepare 1","Status":null,"StartDate":"0001-01-01T00:00:00","SeqNumber":"2.00","DueDate":"0001-01-01T00:00:00","DoSendEmail":false,"DoDocument":false,"DoSendEmailDisplay":1,"DoDocumentDisplay":1,"RoleColumn":"Preparer","IsRoleRequired":false,"IsApplicable":false,"EmailInfo":{"$id":"11","To":"","CC":"","Subject":"[%Task%]-[%TaxYear%]-[%Obligation%]","Body":"The following Task has been assigned to you and added to your Task List.<br/>Task Name: [%Task%]<br/>Location: [%Jurisdiction%]<br/>Item Name: [%Obligation%]<br/>Due Date: [%DueDate%]<br/>"},"Weight":"25","Duedateoffset":-25,"AssignedTo":null,"SOX":null,"ControlID":null,"ProcessStepName":"","TypeOfProcessStep":"","ProcessStepOrder":"1.00","TypeOfTask":"Task","AdditionalInformation":"","Checklist":"{\r\n  \"root\": \"\"\r\n}","ContentTypeId":1,"ActionId":0,"Description":"Prepare 1","ActualEndDate":"0001-01-01T00:00:00","RoleType":1,"Forms":[{"$id":"12","ID":"88","value":"NOL"},{"$id":"13","ID":"95","value":"Centralized M-1"}],"Reports":[]},{"$id":"14","Id":790,"WFInstaceDefinationId":0,"IsDeleted":false,"Name":"Prepare 2","Status":null,"StartDate":"0001-01-01T00:00:00","SeqNumber":"2.00","DueDate":"0001-01-01T00:00:00","DoSendEmail":false,"DoDocument":false,"DoSendEmailDisplay":1,"DoDocumentDisplay":1,"RoleColumn":"Preparer","IsRoleRequired":false,"IsApplicable":false,"EmailInfo":{"$id":"15","To":"","CC":"","Subject":"[%Task%]-[%TaxYear%]-[%Obligation%]","Body":"The following Task has been assigned to you and added to your Task List.<br/>Task Name: [%Task%]<br/>Location: [%Jurisdiction%]<br/>Item Name: [%Obligation%]<br/>Due Date: [%DueDate%]<br/>"},"Weight":"25","Duedateoffset":-25,"AssignedTo":null,"SOX":null,"ControlID":null,"ProcessStepName":"","TypeOfProcessStep":"","ProcessStepOrder":"1.00","TypeOfTask":"Task","AdditionalInformation":"","Checklist":"{\r\n  \"root\": \"\"\r\n}","ContentTypeId":1,"ActionId":0,"Description":"Prepare 2","ActualEndDate":"0001-01-01T00:00:00","RoleType":1,"Forms":[{"$id":"16","ID":"94","value":"Centralized Reclass"},{"$id":"17","ID":"95","value":"Centralized M-1"}],"Reports":[]}]},{"$id":"18","Id":304,"IsDeleted":false,"Name":"Review","IsApplicable":false,"Status":null,"StartDate":"0001-01-01T00:00:00","DueDate":"0001-01-01T00:00:00","Steps":[{"$id":"19","Id":791,"WFInstaceDefinationId":0,"IsDeleted":false,"Name":"Review","Status":null,"StartDate":"0001-01-01T00:00:00","SeqNumber":"3.00","DueDate":"0001-01-01T00:00:00","DoSendEmail":false,"DoDocument":false,"DoSendEmailDisplay":1,"DoDocumentDisplay":1,"RoleColumn":"Reviewer","IsRoleRequired":false,"IsApplicable":false,"EmailInfo":{"$id":"20","To":"","CC":"","Subject":"[%Task%]-[%TaxYear%]-[%Obligation%]","Body":"The following Task has been assigned to you and added to your Task List.<br/>Task Name: [%Task%]<br/>Location: [%Jurisdiction%]<br/>Item Name: [%Obligation%]<br/>Due Date: [%DueDate%]<br/>"},"Weight":"25","Duedateoffset":20,"AssignedTo":null,"SOX":null,"ControlID":null,"ProcessStepName":"","TypeOfProcessStep":"","ProcessStepOrder":"1.00","TypeOfTask":"Task","AdditionalInformation":"","Checklist":"{\r\n  \"root\": \"\"\r\n}","ContentTypeId":1,"ActionId":0,"Description":"Reviee","ActualEndDate":"0001-01-01T00:00:00","RoleType":2,"Forms":[{"$id":"21","ID":"88","value":"NOL"},{"$id":"22","ID":"95","value":"Centralized M-1"}],"Reports":[]}]}],"$id":"1","Id":787,"IsDeleted":false,"isArchived":false,"Name":"Forms Validation WF","SiteUrl":"https://deloittetaxportal.sharepoint.com/sites/appcatalog","ListName":"CIL","ListID":0,"TmpDataIds":[{"$id":"2","TmpId":4,"JurID":2}],"Surveys":[],"AssociatedContentTypes":[],"AssociatedMasterObligations":["46|1120","50|1120 Proforma"],"WorkflowRoles":[{"$id":"23","ID":0,"RoleName":"Preparer","TmpID":0,"BusinessUnitsID":0,"JurisdictionID":0,"isActive":false,"TaxMegaProcessName":null,"BussinessUnitName":null,"Jurisdiction":null,"CurrentUserID":0,"isRequired":false,"DateModified":"0001-01-01T00:00:00","ModifiedBy":null,"DC_ID":0,"AssignedTo":null},{"$id":"24","ID":0,"RoleName":"Reviewer","TmpID":0,"BusinessUnitsID":0,"JurisdictionID":0,"isActive":false,"TaxMegaProcessName":null,"BussinessUnitName":null,"Jurisdiction":null,"CurrentUserID":0,"isRequired":false,"DateModified":"0001-01-01T00:00:00","ModifiedBy":null,"DC_ID":0,"AssignedTo":null}],"StartDate":null,"EndDate":"0001-01-01T00:00:00","DueDate":null,"InternalDueDate":null,"Status":null,"Type":null,"LegalEntity":null,"FiscalYear":null,"ItemName":null,"CreatedBy":null,"Progress":0,"instanceCount":0,"ModifiedBy":null,"ModifiedDate":null,"Period":null,"SkipControlSteps":false,"ValidateRNotesTaskLevel":true};

function process_api_getWorkflowNames(outputCtrl) {
    var apiresponse = latest_getAPIResponse;
    var result = [];
    if (!apiresponse
        || !apiresponse.Milestones || !apiresponse.Milestones.length
        || !outputCtrl || outputCtrl.split('_').length !== 3)
        return;
    $.each(apiresponse.Milestones, function (milestoneIndex, milestone) {
        $.each(milestone.Steps, function (stepIndex, step) {
            var tempStep = JSON.parse(JSON.stringify(step));
            tempStep.MilestoneName = milestone.Name;
            result.push(tempStep);
        });
    });
    // console.log(result);
    var stringResult = JSON.stringify(result);
    $('#' + outputCtrl).val(stringResult);
    textBoxChangeEvent(outputCtrl, $('#' + outputCtrl).attr('name'), stringResult, '', '');
}

// $(function () {
//     process_api_getWorkflowNames('g0_f0_1');
// });